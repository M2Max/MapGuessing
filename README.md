# MapGuessing

A collection of Python scripts to find and filter restaurants based on distance and travel time criteria using Google Maps APIs.

## Overview

This project consists of three Python scripts that work together to:
1. Find restaurants in a specific area using Google Places API
2. Calculate distances and travel times using Google Distance Matrix API
3. Filter results based on specific distance and duration criteria

## Prerequisites

- Python 3.x
- Google Maps API key with access to:
  - Places API
  - Distance Matrix API
- Required Python packages:
  ```
  requests
  ```

## Scripts Description

### 1. restaurant_list.py
Searches for restaurants within a specified radius using Google Places API. It supports filtering by keywords like "agriturismo", "osteria", etc.

**Configuration:**
- `API_KEY`: Your Google Maps API key
- `LOCATION_LAT`, `LOCATION_LNG`: Center point coordinates
- `RADIUS`: Search radius in meters (default: 15000)
- `KEYWORDS`: List of keywords to filter restaurants

**Output:** Creates a CSV file with restaurant details including name, address, coordinates, and ratings.

### 2. distance_calculator.py
Calculates the driving distance and duration from a center point to each restaurant using Google Distance Matrix API.

**Configuration:**
- `API_KEY`: Your Google Maps API key
- `center_lat`, `center_lng`: Starting point coordinates
- `mode`: Travel mode (default: "driving")

**Input:** Uses the CSV file generated by restaurant_list.py
**Output:** Creates a new CSV file with additional distance and duration information

### 3. filter_values.py
Filters the restaurants based on specific distance and duration criteria.

**Default Criteria:**
- Distance: Between 11.5 and 12.5 kilometers
- Duration: Between 15 and 25 minutes

## Usage

1. Set up your Google Maps API key in `restaurant_list.py` and `distance_calculator.py`

2. Find restaurants in the area:
   ```bash
   python src/restaurant_list.py
   ```

3. Calculate distances and travel times:
   ```bash
   python src/distance_calculator.py
   ```

4. Filter results:
   ```bash
   python src/filter_values.py
   ```

## Configuration

You can modify the following parameters in the scripts:

**restaurant_list.py:**
```python
RADIUS = 15000  # Search radius in meters
KEYWORDS = ["agriturismo", "osteria", "hosteria", "trattoria", "podere", "locanda"]
```

**filter_values.py:**
```python
MIN_DISTANCE_KM = 11.5
MAX_DISTANCE_KM = 12.5
MIN_DURATION_MIN = 15
MAX_DURATION_MIN = 25
```

## File Flow

1. `restaurant_list.py` → creates `restaurants_nearby.csv`
2. `distance_calculator.py` → reads `restaurants_nearby.csv` and creates `distances_output.csv`
3. `filter_values.py` → reads `distances_output.csv` and outputs filtered results to console

## New Graphical User Interface (GUI)

A new graphical interface is available using Tkinter. This GUI allows you to:
- Enter your Google Maps API key, center latitude/longitude, search diameter, and filter ranges
- Search for places, calculate distances, and filter results with a single click
- View results directly in the application

### How to Run the GUI

1. Make sure you have all dependencies installed (see below).
2. Start the GUI with:
   ```bash
   .venv/bin/python gui.py
   ```

### GUI Features
- All-in-one workflow: search, distance calculation, and filtering
- User-friendly input fields for all parameters
- Results displayed in a scrollable text area

## Dependencies

Install required packages in your virtual environment:
```bash
pip install requests tkinter
```

## Project Structure

- `main.py` — Command-line interface for the full workflow
- `gui.py` — Graphical user interface (Tkinter)
- `src/restaurant_list.py` — Place search logic (OOP)
- `src/distance_calculator.py` — Distance calculation logic (OOP)
- `src/filter_values.py` — Filtering logic (OOP)

## Notes

- Remember to respect Google Maps API usage limits
- The scripts include pauses between API calls to avoid rate limiting
- All coordinates should be in decimal degrees format
- Distance calculations are based on driving distance, not straight-line distance

## License

This project is open source and available under the BSD 2-Clause License.
